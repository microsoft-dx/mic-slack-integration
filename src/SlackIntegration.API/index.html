<!DOCTYPE html>
<html>
<head>

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/signalr/jquery.signalr-2.2.0.min.js"></script>
    <script src="signalr/hubs"></script>

    <title>Microsoft Innovation Center - Prezenta Laborator</title>
    <meta charset="utf-8" />
</head>
<body>
    <input type="text" id="userNameInput" placeholder="Introduceti numele...  " />
    <input type="text" id="messageInput" placeholder="Introduceti mesajul..." />
    <button id="sendMessageButton">Trimite mesajul!</button>
    <ul id="messageList">

    </ul>

    <script type="text/javascript">

        var hub = $.connection.slackHub;

        hub.client.addMessage = function (userName, message) {
            $("#messageList").append('<li>' + '<b>' + userName + '</b>:' + message + '</li>');
        };

        $("#sendMessageButton").click(function () {

            var payload = {
                UserName: $("#userNameInput").val(),
                Text: $("#messageInput").val()
            };
            $.ajax({
                url: '/api/Slack/PostMessageToSlack',
                method: 'POST',
                dataType: 'json',
                data: payload
            });
        });

        $.connection.hub.start();

    </script>
</body>
</html>
